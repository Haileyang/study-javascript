{"version":3,"sources":["app.ts"],"names":[],"mappings":"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","file":"app.c61986b1.js","sourceRoot":"..","sourcesContent":["const ajax : XMLHttpRequest = new XMLHttpRequest();\nconst content : HTMLDivElement | undefined = document.createElement('div')\nconst root : HTMLElement | null = document.getElementById('root')\nconst NEWS_URL = 'https://api.hnpwa.com/v0/news/1.json'\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/@id.json'\n\n//type naming convention = capitalize\ntype Store = {\n    currentPage : number;\n    feeds : NewsFeed[] //the array contains the types assigned on NewsFeed Type\n}\n\ntype NewsFeed = {\n    id : number;\n    comments_count : number;\n    url : string, \n    user : string, \n    time_ago : string;\n    points: number,\n    title : string; \n    read? : boolean; //? optional\n}\n\nconst store : Store = {\n    currentPage : 1,\n    feeds : [] \n}\n\nfunction getData (url){\n    ajax.open('GET', url, false)\n    ajax.send(); \n\n    return JSON.parse(ajax.response);\n}\n\n\nfunction makeFeeds(feeds){\n    for (let i = 0; i < feeds.length; i++){\n        feeds[i].read = false \n    }\n    return feeds\n} \n\n// 함수로 만들어서 root : HTMLElement | null 에러 방지 \nfunction updateView(html){\n    if(root){\n        root.innerHTML = html;\n    }else{\n        console.error('최상위 컨테이너가 없어 UI를 진행하지 못합니다.')\n    }\n}\n\nfunction newsFeed(){\n    let newsFeed : NewsFeed[] = store.feeds \n    const newsList = [];\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\">\n                            <h1 class=\"font-extrabold\">Hacker News</h1>\n                        </div>\n                        <ul class=\"items-center justify-end flex\">\n                            <li>\n                                <a href=\"#/page/{{__prev_page__}}\" class=\"text-gray-500\">\n                                    PREVIOUS\n                                </a>\n                            </li>\n                            <li class=\"mx-4\">\n                                <span class=\"font-bold\">{{__current_page__}}</span> /\n                                <span>{{__total_page__}}</span>\n                            </li>\n                            <li>\n                                <a href=\"#/page/{{__next_page__}}\" class=\"text-gray-500\">\n                                    NEXT\n                                </a>\n                            </li>\n                        </ul>\n                    </div> \n                </div>\n            </div>\n            <div class=\"p-4 text-2xl text-gray-700\">\n                {{__news_feed__}}        \n            </div>\n        </div>\n    `\n\n    //최초에 newsFeed\n    if(newsFeed.length === 0){\n        newsFeed = store.feeds = getData(NEWS_URL)\n    }\n\n    for(let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++){\n        newsList.push(`\n            <div class=\"p-6 ${newsFeed[i].read ? 'bg-gray-300' : 'bg-white'} mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\n                <ul class=\"flex\">\n                    <li class=\"flex-auto\">\n                        <a href=\"#/show/${newsFeed[i].id}\">${newsFeed[i].title}</a>  \n                    </li>\n                    <li class=\"text-center text-sm ml-10\">\n                        <div class=\"w-10 text-white bg-green-600 rounded-lg px-0 py-2\">${newsFeed[i].comments_count}</div>\n                    </li>\n                </ul>\n                <div class=\"flex mt-3\">\n                    <ul class=\"text-sm text-gray-500 flex\">\n                        <li><i class=\"fas fa-user mr-1\"></i>${newsFeed[i].user}</li>\n                        <li class=\"mx-5\"><i class=\"fas fa-heart mr-1\"></i>${newsFeed[i].points}</li>\n                        <li><i class=\"far fa-clock mr-1\"></i>${newsFeed[i].time_ago}</li>\n                    </ul>  \n                </div>\n            </div>    \n        `)\n    }\n\n    template = template.replace('{{__news_feed__}}', newsList.join(''))\n    template = template.replace('{{__prev_page__}}', store.currentPage > 1 ? store.currentPage - 1 : 1)\n    template = template.replace('{{__next_page__}}', store.currentPage < (newsFeed.length / 10) ? store.currentPage + 1 : store.currentPage)\n    template = template.replace('{{__current_page__}}', store.currentPage)\n    template = template.replace('{{__total_page__}}', (newsFeed.length / 10))\n\n    //하기 코드의 경우, null 값이 들어갈 수 있다고 명시한 에러가 발생한다. HTMLElement | null\n    // null 이 들어가면 innerHTML이 들어갈 경우, 오류가 발생하므로 null\n    // 코드상으로 null이 들어가있지 않은 경우에만, html element 에 접근하게 하는 코드 추가 작성필요\n   \n    // root.innerHTML = template\n    updateView(template)\n    \n}\n\nfunction newsDetail(){\n    const id = location.hash.substr(7)\n    const newsContent = getData(CONTENT_URL.replace('@id', id));\n\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen pb-8\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\">\n                            <h1 class=\"font-extrabold\">Hacker News</h1>\n                        </div>\n                        <div class=\"items-center justify-end\">\n                            <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\n                                <i class=\"fa fa-times\"></i>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"h-full border rounded-xl bg-white m-6 p-4 \">\n                <h2>${newsContent.title}</h2>\n                <div class=\"text-gray-400 h-20\">\n                    ${newsContent.content}\n                </div>\n                <h2>COMMENTS</h2>\n                <hr>\n                {{__comments__}}\n\n            </div>\n        </div>\n    `\n  \n    //읽음 상태 변경 \n    for(let i = 0; i < store.feeds.length; i++){\n        if(store.feeds[i].id === Number(id)){\n            store.feeds[i].read = true;\n            break\n        }\n    }\n\n    function makeComment(comments, called = 0){ \n        const commentString = [] \n\n        // i의 타입은 명시한적이 없지만 에러로 뜨지 않는 이유는 타입스크립트가 추론을 해서 숫자형으로 인지해서 임의로 타입을 지정해줌\n        for (let i = 0; i < comments.length; i++){\n            commentString.push(`\n                <div style=\"padding-left: ${called * 40}px\" class=\"mt-4\">\n                    <div class=\"text-gray-400\">\n                        <i class=\"fa fa-sort-up mr-2\"></i>\n                        <strong>${comments[i].user}</strong> ${comments[i].time_ago}\n                    </div>\n                    <p class=\"text-gray-700\">${comments[i].content}</p>\n                </div>  \n            `)\n\n            \n            if(comments[i].comments.length > 0){\n                commentString.push(makeComment(comments[i].comments, called + 1))\n            }\n        }\n        \n        return commentString.join('')\n    }\n\n    // root.innerHTML = template.replace('{{__comments__}}', makeComment(newsContent.comments))  \n\n    updateView(template.replace('{{__comments__}}', makeComment(newsContent.comments)))\n}\n\nfunction router(){\n    const routePath = location.hash\n    if(routePath === ''){\n        newsFeed()\n    }else if (routePath.indexOf('#/page/') >= 0){\n        store.currentPage = Number(routePath.substr(7))\n        newsFeed()\n    } else{\n        newsDetail() \n    }\n}\nwindow.addEventListener('hashchange', router)\n\nrouter()"]}